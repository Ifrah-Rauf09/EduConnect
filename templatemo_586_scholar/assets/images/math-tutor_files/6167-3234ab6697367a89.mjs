"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6167],{346655:(e,t,i)=>{i.d(t,{Z:()=>a});var l=i(400416),o=i(868808);let a=(e=()=>{})=>{let t=(0,o.mB)(window.location.search),{invite_code:i}=t;if(!i){e(t);return}let a=encodeURIComponent(encodeURIComponent(i));(0,l.Z)({url:"/v3/invite_code/attribution/land/",method:"POST",data:{invite_code:a}})}},452406:(e,t,i)=>{i.d(t,{Z:()=>y});var l=i(667294),o=i(545007),a=i(616550),s=i(883119),n=i(488792),r=i(636565),d=i(758339),c=i(144326),h=i(297728),_=i(410150),u=i(26456),p=i(451237),m=i(785893);function P({isOpen:e,onDismiss:t}){let i=(0,c.ZP)();return(0,m.jsx)(d.ZP,{accessibilityModalLabel:i._('Disabled Pin Publishing Error Message Modal', 'disabledPinCreationModal.modal.accessibilityLabel', 'Label for disabled pin creation modal'),isOpen:e,mobileAccessibilityCloseIconLabel:i._('Close disabled publishing message modal', 'disabledPinCreationModal.modal.closeIconLabel', 'Label for the close button on the disabled publishing modal'),onDismiss:t,type:"DisabledPublishingModal",children:(0,m.jsxs)(s.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:6,paddingY:4,children:[(0,m.jsx)(s.X6,{children:i._('Oops...', 'disabledPinCreationModal.modal.heading', 'Exclamation used to show recognition of a mistake.')}),(0,m.jsx)(s.xu,{paddingY:3,children:(0,m.jsx)(s.xv,{children:i._('Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.', 'disabledPinCreationModal.modal.text', 'Message to let users know there is an error.')})}),(0,m.jsx)(s.xu,{paddingY:3,children:(0,m.jsx)(s.zx,{color:"red",onClick:()=>t(),size:"lg",text:i._('Dismiss', 'disabledPinCreationModal.button.dismiss', 'Button text for closing the disabled pin creation modal')})})]})})}function b(e){let t=(0,c.ZP)(),{viewType:i,boardId:l,handleTouch:o}=e,a=t._('Board', 'createMenuLinkButton.Create.Board.Label', 'label for creating a new board option'),n=t._('Section', 'createMenuLinkButton.Create.Section.Label', 'label for creating a new section option');return 5===i&&l?(0,m.jsx)(s.Tg,{href:`/board/${l}/create_section/`,onTap:o,rounding:2,children:(0,m.jsx)(s.xu,{"data-test-id":"addSectionButton",paddingY:2,children:(0,m.jsx)(s.X6,{size:"400",children:n})})}):(0,m.jsx)(s.Tg,{href:"/board/create/",onTap:o,children:(0,m.jsx)(s.xu,{"data-test-id":"createMenuCreateBoardButton",paddingY:2,children:(0,m.jsx)(s.X6,{size:"400",children:a})})})}var g=i(246826);function f({disabledPinCreation:e,handleDisablePublish:t,handleTouch:i}){let l=(0,c.ZP)(),o=(0,a.k6)(),n=e=>({imageBase64:e,description:"",imageUrl:"",method:g.Iv}),r=l._('Photo', 'createPinButton.Photo.Upload.Label', 'label to upload pin from camera roll photos');return(0,m.jsx)(s.iP,{onTap:()=>{if(e){t();return}i()},tapStyle:"none",children:(0,m.jsxs)(s.xu,{paddingY:2,position:"relative",children:[(0,m.jsx)(s.X6,{size:"400",children:r}),e?null:(0,m.jsx)("input",{accept:"image/*",id:"upload-pin",onChange:e=>{let t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=()=>{let e=t.result;o.push({pathname:`/pin/create/${g.Iv}/`,state:n(String(e))})}},style:{opacity:0,position:"absolute",top:"0px",height:"100%",width:"100%"},type:"file"})]})})}var x=i(947506),A=i(934648),z=i(799239);function L(e,t,i){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var l=i.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:l+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let C=new s.Ry(1),j=e=>{let t=window&&window.innerWidth||0,i=e._('Enter a link to create a Pin, https://...', 'placeholder in text field where a user inputs a URL to create a Pin', 'placeholder in text field where a user inputs a URL to create a Pin'),l=e._('Enter a link, https://...', 'placeholder in text field where a user inputs a URL to create a Pin - short version, 30 char limit', 'placeholder in text field where a user inputs a URL to create a Pin - short version, 30 char limit');return t<380?l:i};class w extends l.PureComponent{constructor(...e){super(...e),L(this,"state",{createPinFromLinkUrl:"",showCreateModal:!1,showInlineTextEditCreatePin:!1,showPublishingDisabledError:!1,urlValidationError:null}),L(this,"createPinFromLinkInput",(0,l.createRef)()),L(this,"createMenuPlusIconButtonRef",(0,l.createRef)()),L(this,"closeCreateModal",()=>{this.setState({showCreateModal:!1,showInlineTextEditCreatePin:!1}),this.props.updatePinBuilderInput({isInputOpen:!1,submittedLink:""})}),L(this,"clearValidationError",()=>{this.setState({urlValidationError:null})}),L(this,"openCreateModal",()=>{this.handleTouch(),this.props.requireAuthForLimitedLogin({fn:()=>this.setState({showCreateModal:!0}),modalHeader:(0,x.is)(this.props.i18n)})()}),L(this,"handleCreatePinFromLinkTouch",()=>{this.setState({showInlineTextEditCreatePin:!0}),this.props.updatePinBuilderInput({isInputOpen:!0})}),L(this,"handleDisablePublish",()=>{this.setState({showCreateModal:!1,showPublishingDisabledError:!0})}),L(this,"handleLinkFieldChange",({value:e})=>{this.setState({createPinFromLinkUrl:e})}),L(this,"handlePinFromLinkFormSubmit",(e,t)=>{let{createPinFromLinkUrl:i}=this.state,{experimentsClient:l}=this.props;e.preventDefault();let{errors:o}=(0,u.Jx)({message:this.props.i18n._('Oops! Please enter a valid URL.', 'URL validation error message on Pin builder form', 'URL validation error message on Pin builder form'),experimentsClient:l})(i),[a]=o;a?this.setState({urlValidationError:a}):this.handleUrlValidationSuccess(t)}),L(this,"handleTouch",()=>{let{logContextEvent:e,viewType:t,elementType:i}=this.props;e({view_type:t,view_parameter:3106,element:i,event_type:102,aux_data:{source:p.Z.PROFILE}})}),L(this,"handleUrlValidationSuccess",e=>{this.setState({showInlineTextEditCreatePin:!1});let{createPinFromLinkUrl:t}=this.state;this.props.updatePinBuilderInput({submittedLink:t}),e.push({pathname:"/pin-builder/",state:{createPinFromLinkUrl:t}}),this.closeCreateModal()}),L(this,"renderCreatePinFromLinkOption",()=>{let{disabledPinCreation:e,history:t}=this.props,{createPinFromLinkUrl:i,showInlineTextEditCreatePin:l}=this.state,o=this.props.i18n._('Website', 'editPin.CreatePinFromUrl.Label', 'label for option to create a pin from a url');return(0,m.jsx)(s.kC,{alignItems:"center",height:46,justifyContent:"start",children:l?(0,m.jsx)("form",{onSubmit:e=>this.handlePinFromLinkFormSubmit(e,t),style:{width:"100%"},children:(0,m.jsxs)(s.xu,{display:"flex",justifyContent:"between",position:"relative",zIndex:C,children:[(0,m.jsxs)(s.xu,{ref:this.createPinFromLinkInput,width:"100%",children:[this.renderErrorFlyout(),(0,m.jsx)(s.nv,{id:"create-pin-from-link",onChange:this.handleLinkFieldChange,onFocus:()=>this.setState({urlValidationError:null}),placeholder:j(this.props.i18n),size:"lg",value:i})]}),(0,m.jsx)(s.hU,{accessibilityLabel:this.props.i18n._('Create Pin from entered link', 'navigation button to confirm user will create a Pin from a link they entered', 'navigation button to confirm user will create a Pin from a link they entered'),icon:"arrow-forward",iconColor:"darkGray",onClick:({event:e})=>this.handlePinFromLinkFormSubmit(e,t),size:"lg"})]})}):(0,m.jsx)(s.iP,{onTap:()=>{if(e){this.handleDisablePublish();return}this.handleCreatePinFromLinkTouch()},tapStyle:"none",children:(0,m.jsx)(s.xu,{"data-test-id":"websiteButton",position:"relative",children:(0,m.jsx)(s.X6,{size:"400",children:o})})})})}),L(this,"renderErrorFlyout",()=>{let{urlValidationError:e}=this.state;return e&&(0,m.jsx)(s.J2,{anchor:this.createPinFromLinkInput.current,idealDirection:"up",onDismiss:this.clearValidationError,size:"sm",children:(0,m.jsx)(s.xu,{padding:3,width:"100%",children:(0,m.jsxs)(s.kC,{gap:2,children:[(0,m.jsx)(s.qb,{type:"problem"}),(0,m.jsx)(s.xv,{align:"center",weight:"bold",children:e})]})})})})}componentDidMount(){let{isInputOpen:e,submittedLink:t}=this.props;(e||t)&&this.setState({showCreateModal:!!e,showInlineTextEditCreatePin:!!e,createPinFromLinkUrl:t||""})}render(){let{bgColor:e,boardId:t,buttonPadding:i,disabledPinCreation:o,i18n:a,isDesktop:n,iconButtonColor:c="gray",iconButtonSize:h="xl",viewType:_}=this.props,{showCreateModal:u,showPublishingDisabledError:p}=this.state,g=this.props.i18n._('Add a Pin or board', 'heading in profile create modal', 'heading in profile create modal');164===_?g=this.props.i18n._('Add to section', 'heading in section create modal', 'heading in section create modal'):5===_&&(g=this.props.i18n._('Add a Pin or section', 'heading in profile create modal', 'heading in profile create modal')||a._('Add to board', 'heading in board create modal', 'heading in board create modal'));let x=4===_?this.props.i18n._('Add to profile', 'editPin.AddToProfile.Modal.Header', 'heading in profile create modal'):g,A=(5===_||164===_)&&this.createMenuPlusIconButtonRef.current;return(0,m.jsxs)(l.Fragment,{children:[(0,m.jsx)(s.kC,{alignItems:"center",justifyContent:"start",children:(0,m.jsx)(s.xu,{"data-test-id":"createMenuCreateButton",children:(0,m.jsx)(s.hU,{ref:this.createMenuPlusIconButtonRef,accessibilityLabel:this.props.i18n._('Create a Pin or board', 'icon that opens model prompting user to create a new pin or board', 'icon that opens model prompting user to create a new pin or board'),bgColor:e,icon:"add",iconColor:c,onClick:this.openCreateModal,padding:"auto"!==i?i:1,size:h})})}),u&&(0,m.jsx)(d.ZP,{accessibilityModalLabel:"",heading:x,isOpen:this.state.showCreateModal,mobileAccessibilityCloseIconLabel:this.props.i18n._('close board and pin create modal', 'close modal that prompts user to create a new pin or board', 'close modal that prompts user to create a new pin or board'),onDismiss:this.closeCreateModal,type:"create_menu",children:(0,m.jsx)(s.xu,{padding:3,children:(0,m.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,m.jsxs)(l.Fragment,{children:[(0,m.jsxs)(s.xu,{paddingX:2,children:[(0,m.jsx)(s.xv,{children:this.props.i18n._('Create', 'editPin.Create.Section.Text', 'Section title to Create new things on Edit Pin add modal')}),(0,m.jsx)(l.Fragment,{children:this.renderCreatePinFromLinkOption()}),(0,m.jsx)(f,{disabledPinCreation:o,handleDisablePublish:this.handleDisablePublish,handleTouch:this.handleTouch})]}),164!==_&&(0,m.jsxs)(s.xu,{marginTop:6,paddingX:2,children:[(0,m.jsx)(s.xv,{children:this.props.i18n._('Add', 'editPin.Section.Add.Text', 'Section Add title on Edit Pin add modal')}),(0,m.jsx)(b,{boardId:t,handleTouch:()=>{this.handleTouch(),this.closeCreateModal()},viewType:_})]})]}),(0,m.jsx)(s.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:7,children:(0,m.jsx)(s.zx,{onClick:()=>this.closeCreateModal(),size:"lg",text:this.props.i18n._('Close', 'editPin.Modal.Close.Button', 'Button text to close modal on EditPin')})})]})})}),p&&(0,m.jsx)(P,{isOpen:!0,onDismiss:()=>{this.setState({showPublishingDisabledError:!1})}}),A&&(0,m.jsx)(r.N,{anchors:{[n?3006:4006]:this.createMenuPlusIconButtonRef.current},idealDirection:"up",onAnchorTouch:"complete",placementId:n?18:1000251,scrollToDismiss:!0})]})}}function y(e){let t=(0,c.ZP)(),i=(0,_.HG)(),l=(0,h.F)(),{checkExperiment:s}=l,r=["disable_all","disable_web_pins"].includes(s("disable_pin_creation").group),d=(0,o.I0)(),u=(0,a.k6)(),{pinBuilder:p}=(0,o.v9)(e=>e.session),P=(0,n.Z)(),b=p&&p.isInputOpen,g=p&&p.submittedLink,f=(0,A.Z)();return(0,m.jsx)(w,{...e,disabledPinCreation:r,experimentsClient:l,history:u,i18n:t,isDesktop:i,isInputOpen:b,logContextEvent:P,requireAuthForLimitedLogin:f,submittedLink:g,updatePinBuilderInput:e=>d((0,z.p)(e))})}},246826:(e,t,i)=>{i.d(t,{Iv:()=>l,dU:()=>_,it:()=>s,jI:()=>h,n0:()=>r,nY:()=>a,sW:()=>c,up:()=>o});let l="uploaded",o="pinbuilder",a="scraped",s="button";function n(e){return!!e&&"object"==typeof e&&"method"in e}function r(e){return n(e)&&e.method===a}function d(e){return n(e)&&e.method===l}function c(e){return n(e)&&e.method===s}function h(e){return r(e)||d(e)||c(e)}function _({boardId:e,checkExperiment:t,createPin:i,sectionId:l,state:o}){let a=[];if(r(o)){let{imgData:s}=o;s.forEach(s=>{a.push(i(function({boardId:e,checkExperiment:t,image:i,sectionId:l,state:o}){let{description:a,link:s,method:n}=o;return{boardId:e,checkExperiment:t,description:a,guid:"",imageBase64:"",imageUrl:i,link:s,method:n,sectionId:l}}({boardId:e,checkExperiment:t,image:s,sectionId:l,state:o})))})}else a.push(i(function({boardId:e,checkExperiment:t,sectionId:i,state:l}){if(d(l)){let{description:o,imageBase64:a,imageUrl:s,method:n}=l;return{boardId:e,checkExperiment:t,description:o,guid:"",imageBase64:a,imageUrl:s,link:"",method:n,sectionId:i}}{let{description:o,guid:a,imageUrl:s,link:n,method:r}=l;return{boardId:e,checkExperiment:t,description:o,guid:a,imageUrl:s,link:n,method:r,sectionId:i}}}({boardId:e,checkExperiment:t,sectionId:l,state:o})));return a}},947506:(e,t,i)=>{i.d(t,{Bb:()=>m,Bx:()=>n,F4:()=>s,Qj:()=>r,_6:()=>p,gv:()=>a,hg:()=>d,is:()=>_,jP:()=>u,lt:()=>o,oM:()=>c,wI:()=>h});var l=i(868808);let o=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),a=({firstName:e,i18n:t})=>e?(t._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",e):t._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board'),s=e=>{let t=(0,l.mB)(e.search).board_url;if(t){let e=(0,l.Jx)(t),i=(0,l.XP)({accept_invite:!0,seamless:!0});return e.includes("?")?`${e}&${i}`:`${e}?${i}`}return e.pathname},n=e=>e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.'),r=e=>{let t=e.pathname;if(t.startsWith("/pin/")){let e=t.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/repin/`}return t},d=e=>e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.'),c=e=>e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.'),h=e=>{let t=e.pathname;if(t.startsWith("/pin/")){let e=t.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/edit/`}return t},_=e=>e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.'),u=e=>e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.'),p=e=>e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.'),m=e=>e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')},799239:(e,t,i)=>{i.d(t,{F:()=>l,p:()=>o});let l=e=>({type:"PIN_BUILDER_LOADED_IMAGES",payload:e}),o=e=>({type:"UPDATE_PIN_BUILDER_INPUT",payload:e})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/6167-3234ab6697367a89.mjs.map